<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Guard Rules Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f8fafc;
        }
        .container {
            background: white;
            border-radius: 8px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .status {
            padding: 12px;
            border-radius: 6px;
            margin: 16px 0;
            font-weight: 500;
        }
        .status.active { background: #dcfce7; color: #166534; border: 1px solid #bbf7d0; }
        .status.override { background: #fef3c7; color: #92400e; border: 1px solid #fde68a; }
        .status.emergency { background: #fee2e2; color: #991b1b; border: 1px solid #fecaca; }
        .commands {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 16px;
            margin: 20px 0;
        }
        .command-group {
            background: #f8fafc;
            padding: 16px;
            border-radius: 6px;
            border: 1px solid #e2e8f0;
        }
        .command-group h3 {
            margin: 0 0 12px 0;
            color: #1e293b;
        }
        .command {
            display: flex;
            align-items: center;
            margin: 8px 0;
            padding: 8px 12px;
            background: white;
            border-radius: 4px;
            border: 1px solid #e2e8f0;
            cursor: pointer;
            transition: all 0.2s;
        }
        .command:hover {
            background: #f1f5f9;
            border-color: #cbd5e1;
        }
        .command code {
            background: #1e293b;
            color: #f8fafc;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Monaco', 'Menlo', monospace;
            margin-right: 8px;
        }
        .test-area {
            margin-top: 24px;
            padding: 20px;
            background: #f8fafc;
            border-radius: 6px;
            border: 1px solid #e2e8f0;
        }
        .test-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', monospace;
            margin: 8px 0;
        }
        .test-button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            margin: 8px 8px 8px 0;
        }
        .test-button:hover {
            background: #2563eb;
        }
        .test-button.override {
            background: #f59e0b;
        }
        .test-button.override:hover {
            background: #d97706;
        }
        .test-button.emergency {
            background: #ef4444;
        }
        .test-button.emergency:hover {
            background: #dc2626;
        }
        .result {
            margin-top: 16px;
            padding: 12px;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 14px;
        }
        .result.allowed {
            background: #dcfce7;
            color: #166534;
            border: 1px solid #bbf7d0;
        }
        .result.blocked {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #fecaca;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üõ°Ô∏è AI Guard Rules System Test</h1>
        
        <div id="status" class="status active">
            <strong>Status:</strong> Guard Rules Active - Mode: IMPROVE
        </div>
        
        <div class="commands">
            <div class="command-group">
                <h3>üéØ Development Modes</h3>
                <div class="command" onclick="setMode('REBUILD')">
                    <code>@rebuild</code> Complete rebuild mode
                </div>
                <div class="command" onclick="setMode('IMPROVE')">
                    <code>@improve</code> Incremental improvements
                </div>
                <div class="command" onclick="setMode('NEW_FEATURE')">
                    <code>@new</code> New feature development
                </div>
                <div class="command" onclick="setMode('DEFENSIVE')">
                    <code>@defensive</code> Analysis only
                </div>
            </div>
            
            <div class="command-group">
                <h3>üö´ Override Commands</h3>
                <div class="command" onclick="activateOverride('User override requested')">
                    <code>@override</code> Temporary disable
                </div>
                <div class="command" onclick="activateOverride('Full access requested', ['all'])">
                    <code>@free</code> Full access
                </div>
                <div class="command" onclick="activateEmergency('Critical fix needed')">
                    <code>@emergency</code> Emergency override
                </div>
                <div class="command" onclick="deactivateOverride()">
                    <code>@reactivate-guard-rails</code> Re-enable
                </div>
            </div>
            
            <div class="command-group">
                <h3>üéÆ Standards Control</h3>
                <div class="command" onclick="toggleStandard('react')">
                    <code>@no-react-standards</code> Toggle React standards
                </div>
                <div class="command" onclick="toggleStandard('tailwind')">
                    <code>@no-tailwind-standards</code> Toggle Tailwind standards
                </div>
                <div class="command" onclick="toggleStandard('supabase')">
                    <code>@no-supabase-standards</code> Toggle Supabase standards
                </div>
                <div class="command" onclick="toggleStandard('shadcn')">
                    <code>@no-shadcn-standards</code> Toggle shadcn standards
                </div>
            </div>
        </div>
        
        <div class="test-area">
            <h3>üß™ Test Guard Rules</h3>
            <p>Test how the guard rules system responds to different actions:</p>
            
            <input type="text" id="testAction" class="test-input" placeholder="Enter action to test (e.g., 'create sidebar component')" />
            <input type="text" id="testUserMessage" class="test-input" placeholder="Enter user message (e.g., '@override - need to fix bug')" />
            
            <button class="test-button" onclick="testAction()">Test Action</button>
            <button class="test-button override" onclick="testOverride()">Test Override</button>
            <button class="test-button emergency" onclick="testEmergency()">Test Emergency</button>
            
            <div id="testResult" class="result" style="display: none;"></div>
        </div>
    </div>

    <script>
        // Mock guard rules system for testing
        let guardRules = {
            overrideActive: false,
            emergencyActive: false,
            currentMode: 'IMPROVE',
            standards: {
                react: true,
                tailwind: true,
                supabase: true,
                shadcn: true
            }
        };
        
        function updateStatus() {
            const statusEl = document.getElementById('status');
            let statusText = '';
            let statusClass = 'active';
            
            if (guardRules.emergencyActive) {
                statusText = 'üö® EMERGENCY OVERRIDE ACTIVE';
                statusClass = 'emergency';
            } else if (guardRules.overrideActive) {
                statusText = 'üö´ OVERRIDE ACTIVE';
                statusClass = 'override';
            } else {
                statusText = `üõ°Ô∏è Guard Rules Active - Mode: ${guardRules.currentMode}`;
                statusClass = 'active';
            }
            
            statusEl.textContent = `Status: ${statusText}`;
            statusEl.className = `status ${statusClass}`;
        }
        
        function setMode(mode) {
            guardRules.currentMode = mode;
            updateStatus();
            console.log(`üéØ Mode changed to: ${mode}`);
        }
        
        function activateOverride(reason, allowedActions = ['all']) {
            guardRules.overrideActive = true;
            guardRules.emergencyActive = false;
            updateStatus();
            console.log(`üö´ OVERRIDE ACTIVATED: ${reason}`);
        }
        
        function activateEmergency(reason) {
            guardRules.emergencyActive = true;
            guardRules.overrideActive = true;
            updateStatus();
            console.log(`üö® EMERGENCY OVERRIDE ACTIVATED: ${reason}`);
        }
        
        function deactivateOverride() {
            guardRules.overrideActive = false;
            guardRules.emergencyActive = false;
            updateStatus();
            console.log('‚úÖ GUARD RAILS REACTIVATED');
        }
        
        function toggleStandard(standard) {
            guardRules.standards[standard] = !guardRules.standards[standard];
            const status = guardRules.standards[standard] ? 'enabled' : 'disabled';
            console.log(`üéÆ ${standard} standards ${status}`);
        }
        
        function testAction() {
            const action = document.getElementById('testAction').value;
            const userMessage = document.getElementById('testUserMessage').value;
            
            if (!action) {
                alert('Please enter an action to test');
                return;
            }
            
            // Simulate guard rules check
            let result = { allowed: true, reason: 'ALL_CHECKS_PASSED' };
            
            // Check for override commands
            if (userMessage.includes('@override') || userMessage.includes('@free') || userMessage.includes('@emergency')) {
                result = { allowed: true, reason: 'OVERRIDE_ACTIVE' };
            }
            
            // Check for mode-specific rules
            if (guardRules.currentMode === 'DEFENSIVE' && !action.includes('read')) {
                result = { allowed: false, reason: 'DEFENSIVE mode: Only read-only operations allowed' };
            }
            
            // Check for shadcn component requests
            if (action.includes('sidebar') || action.includes('button') || action.includes('card')) {
                if (guardRules.standards.shadcn && !action.includes('shadcn')) {
                    result = { allowed: false, reason: 'SHADCN_VIOLATION: Must use shadcn/ui component' };
                }
            }
            
            showResult(result);
        }
        
        function testOverride() {
            document.getElementById('testAction').value = 'create custom sidebar component';
            document.getElementById('testUserMessage').value = '@override - need to create custom component';
            testAction();
        }
        
        function testEmergency() {
            document.getElementById('testAction').value = 'fix critical authentication bug';
            document.getElementById('testUserMessage').value = '@emergency - production is down';
            testAction();
        }
        
        function showResult(result) {
            const resultEl = document.getElementById('testResult');
            resultEl.style.display = 'block';
            resultEl.className = `result ${result.allowed ? 'allowed' : 'blocked'}`;
            resultEl.innerHTML = `
                <strong>Result:</strong> ${result.allowed ? '‚úÖ ALLOWED' : '‚ùå BLOCKED'}<br>
                <strong>Reason:</strong> ${result.reason}
            `;
        }
        
        // Initialize
        updateStatus();
    </script>
</body>
</html>





